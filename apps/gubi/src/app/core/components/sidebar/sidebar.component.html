<p-drawer
  [visible]="layoutService.isSidebarOpen"
  [modal]="layoutService.isMobile"
  [closable]="false"
  (visibleChange)="layoutService.setIsSidebarOpen($event)"
  [styleClass]="layoutService.sidebarClass()"
  role="navigation"
  aria-label="Menu principal"
>
  <ng-template #header>
    <div class="flex items-center justify-between">
      <a class="cursor-pointer" [routerLink]="'/spaces'" aria-label="Ir para EspaÃ§os">
        <img [src]="layoutService.isSidebarExpanded ? 'gb_gubi_logo.svg' : 'gb_icon.svg'" alt="Gubi" class="logo w-full" />
      </a>
    </div>
  </ng-template>

  <ng-template #content>
    <div class="flex flex-col h-full pt-40" [ngClass]="{ 'items-center': !layoutService.isSidebarExpanded }">
      <div class="flex flex-col gap-3 justify-start">
        @for (item of menuItems; track item.route) {
        <a [routerLink]="item.route">
          <p-button
            [label]="layoutService.isSidebarExpanded ? item.label : undefined"
            [icon]="item.icon"
            severity="secondary"
            [styleClass]="(layoutService.isSidebarExpanded ? 'w-full !justify-start ' : '') + (isActive(item.route) ? ' brightness-90' : '')"
            [pTooltip]="!layoutService.isSidebarExpanded ? item.label : undefined"
            tooltipPosition="right"
          ></p-button>
        </a>
        }
      </div>

      <div class="mt-auto">
        <div class="flex" [ngClass]="{ 'justify-end': layoutService.isSidebarExpanded }">
          <p-button
            icon="pi pi-chevron-right"
            class="transition-transform duration-1000 ease-in-out"
            [ngClass]="{ 'rotate-180': layoutService.isSidebarExpanded }"
            severity="secondary"
            [rounded]="true"
            (click)="layoutService.toggleSidebarExpansion()"
            [pTooltip]="layoutService.isSidebarExpanded ? 'Recolher menu' : 'Expandir menu'"
            tooltipPosition="right"
          ></p-button>
        </div>
        <hr class="my-4 mx-1 border-t border-0 border-surface" />
        <p-button
          [label]="layoutService.isSidebarExpanded ? 'Sair' : undefined"
          icon="pi pi-power-off"
          severity="secondary"
          [styleClass]="layoutService.isSidebarExpanded ? 'w-full' : ''"
          (click)="logout()"
          [pTooltip]="!layoutService.isSidebarExpanded ? 'Sair' : undefined"
          tooltipPosition="right"
        ></p-button>
      </div>
    </div>
  </ng-template>
</p-drawer>
